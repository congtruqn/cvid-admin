webpackJsonp([5],{Ez3w:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});a("XW0x");var e=a("IC97"),s=a("rTQy"),o=a("Zkiq"),n=a("GPCn"),d={name:"addtoquote",components:{Datepicker:e.a,addsupplier:o.default,addbrand:n.default},data:function(){return{isModalVisible:!1,listproducttypes:[],listproducts:[],item:null,items:[],template:s.default,id:"",tag:"",tag1:"aa",tags:[],options:[],optionsc:[{supplier_name:"tru",_id:"616ed4677a989f311c1ebad5"}],isAddBrandVisible:!1,brands:[],total:0}},methods:{addBrand:function(){this.isAddBrandVisible=!0},closeAddBrand:function(){this.isAddBrandVisible=!1},addSupplier:function(t){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},onChange:function(t,i){var a=this;this.$nextTick(function(){a.listproducts[i].name=t})},editTag:function(t){console.log(t)},addQuote:function(t){var i=this.listproducts.filter(function(i){return i.index==t});if(0==i.length)this.listproducts.push({index:t,count:1,detail_id:this.$route.query.id});else{var a=i[i.length-1];if(a){var e=a.count+1;this.listproducts.push({index:t,count:e,detail_id:this.$route.query.id})}}},getLabel:function(t){return t},selectLabel:function(t,i){this.listproducts[i].is_select=1},changeLabel:function(t,i){this.listproducts[i].name=t},updateItems:function(t){var i=this;this.items=[],this.$http.get("api/products/getallproductsnotpage",{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(t){for(var a in t.data)i.items.push(t.data[a].product_name)})},handleSubmit:function(t){this.$http.post("api/toquotedetails/addtoquotedetail",this.listproducts,{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(t){window.location.href="/toquote"}).catch(function(t){console.error(t.response)})},updateSupplier:function(){var t=this;this.$http.get("api/suppliers/getallsuppliersnotpage",{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(i){t.options=i.data,console.log(t.options)})},updateBrand:function(){var t=this;this.$http.get("api/brands/getallbrandsnotpage",{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(i){t.brands=i.data})}},mounted:function(){var t=this;this.id=this.$route.query.id,this.$http.get("api/toquote/getproducttypebyid?id="+this.$route.query.id,{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(i){for(var a in t.listproducttypes=i.data,i.data)t.listproducttypes[a].data=[]}),this.$http.get("api/toquotedetails/getalltoquotedetails?id="+this.$route.query.id,{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(i){for(var a in t.listproducts=i.data,i.data)t.listproducts[a].detail_id=i.data[a].toquote_id,t.listproducts[a].change=1,i.data[a].total&&(t.total=t.total+parseFloat(i.data[a].total))}),this.updateSupplier(),this.updateBrand()},created:function(){}},l={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[t._m(0),t._v(" "),a("section",{staticClass:"panel panel-inverse"},[a("div",{staticClass:"row"},[a("div",{staticClass:"panel-body"},[a("button",{staticClass:"btn btn-primary m-r-5 m-b-5",on:{click:function(i){return t.handleSubmit()}}},[t._v("\n          Lưu về máy\n        ")])]),t._v(" "),a("div",{staticClass:"product_detail"},[t._l(t.listproducttypes,function(i,e){return a("table",{key:e,staticClass:"table call_hostory"},[a("tbody",[a("tr",[a("td",{attrs:{colspan:"7"}},[t._v("Hệ : "+t._s(i.name))])]),t._v(" "),t._l(t.listproducts,function(i,s){return e==i.index&&t.listproducts[s].total?a("tr",{key:s},[a("td",{staticClass:"to_count"},[t._v(t._s(i.count))]),t._v(" "),a("td",{staticClass:"to_name"},[a("p",[t._v(t._s(t.listproducts[s].name))])]),t._v(" "),a("td",{staticClass:"to_brand"},[a("p",[t._v(t._s(t.listproducts[s].brand[0].brand_name))])]),t._v(" "),a("td",{staticClass:"to_unit"},[a("p",[t._v(t._s(t.listproducts[s].unit))])]),t._v(" "),a("td",{staticClass:"to_num"},[a("p",[t._v(t._s(t.listproducts[s].num))])]),t._v(" "),a("td",{staticClass:"to_price"},[a("p",[t._v(t._s(t.listproducts[s].sale_price.toLocaleString("en-US")))])]),t._v(" "),a("td",{staticClass:"to_total"},[a("p",[t._v(t._s(t.listproducts[s].total.toLocaleString("en-US")))])])]):t._e()})],2)])}),t._v(" "),a("p",[t._v("Tổng tiền: "+t._s(t.total.toLocaleString("en-US")))])],2)])]),t._v(" "),a("addsupplier",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],on:{inputData:t.updateSupplier,close:t.closeModal}}),t._v(" "),a("addbrand",{directives:[{name:"show",rawName:"v-show",value:t.isAddBrandVisible,expression:"isAddBrandVisible"}],on:{inputData:t.updateBrand,close:t.closeAddBrand}})],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("section",{staticClass:"content-header"},[i("h1",[this._v("Tải báo giá")]),this._v(" "),i("ol",{staticClass:"breadcrumb"},[i("li",[i("a",[i("i",{staticClass:"fa fa-dashboard"}),this._v("Trang chủ")])]),this._v(" "),i("li",[i("a",[this._v("Tải báo giá")])])])])}]},r=a("VU/8")(d,l,!1,null,null,null);i.default=r.exports}});
//# sourceMappingURL=5.e86bfac109f18825c95c.js.map