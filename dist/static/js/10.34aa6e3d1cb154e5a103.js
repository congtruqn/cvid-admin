webpackJsonp([10],{"6laq":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("GPCn"),o=s("XW0x"),n=s.n(o),a={data:function(){return{isModalVisible:!1,isModalEditVisible:!1,isModalProducttypeVisible:!1,listproducts:"",countinvoicetype:"",page:Number(this.$route.query.page),editid:"",supplierid:"",suppliername:"",projects:"",supplier_name:"",json_fields:{"Tên sản phẩm":"name","Nhà cung cấp":"supplier","Đơn vị tính":"unit","Số lượng":"num"},json_data:[],json_meta:[[{key:"charset",value:"utf-8"}]]}},components:{addbrand:e.default},methods:{todate:function(t){return n.a.timestamptodate(t)},onChange:function(t){this.listproducts[t].sale_price=this.listproducts[t].price/this.listproducts[t].profit_margin,this.listproducts[t].total=this.listproducts[t].sale_price*this.listproducts[t].num},showisModalProducttype:function(t){console.log(t),this.editid=t,this.isModalProducttypeVisible=!0},closeModal:function(){this.isModalVisible=!1},closeEditModal:function(){this.isModalEditVisible=!1},closeProductTypeModal:function(){this.isModalProducttypeVisible=!1},saveUpdateProfit:function(){this.$http.post("api/toquotedetails/updateprofit",{toquotedetails:this.listproducts},{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(t){confirm("Lưu thành công, quay về trang trước!")&&(window.location.href="/toquote")}).catch(function(t){console.error(t.response)})},updateMessage:function(t){this.listinvoicetypes=t}},mounted:function(){var t=this;this.$http.get("api/toquotedetails/getalltoquotedetails?id="+this.$route.query.toquote_id,{headers:{Authorization:"Basic "+localStorage.getItem("token")}}).then(function(i){for(var s in t.listproducts=i.data,i.data)t.listproducts[s].detail_id=i.data[s].toquote_id,t.listproducts[s].change=1;console.log(t.listproducts)})}},l={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[t._m(0),t._v(" "),s("section",{staticClass:"panel panel-inverse"},[s("div",{staticClass:"row"},[s("div",{staticClass:"panel-body"},[s("button",{staticClass:"btn btn-primary m-r-5 m-b-5",on:{click:t.saveUpdateProfit}},[t._v("\n          Lưu lại\n        ")])]),t._v(" "),s("table",{staticClass:"table"},[t._m(1),t._v(" "),s("tbody",t._l(t.listproducts,function(i,e){return s("tr",{key:e},[s("td",[t._v(t._s(e+1))]),t._v(" "),s("td",[s("p",{staticClass:"item_list_1"},[t._v(t._s(t.listproducts[e].name))])]),t._v(" "),s("td",[s("p",{staticClass:"item_list_1"},[t._v(t._s(t.listproducts[e].supplier_choise))])]),t._v(" "),s("td",[s("p",{staticClass:"item_list_1"},[t._v(t._s(t.listproducts[e].unit))])]),t._v(" "),s("td",[s("p",{staticClass:"item_list_1"},[t._v(t._s(t.listproducts[e].num))])]),t._v(" "),s("td",[s("p",{staticClass:"item_list_1"},[t._v(t._s(t.listproducts[e].price.toLocaleString("en-US")))])]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.listproducts[e].profit_margin,expression:"listproducts[index].profit_margin"}],staticClass:"form-control",attrs:{placeholder:"Hệ số lợi nhuận",type:"number"},domProps:{value:t.listproducts[e].profit_margin},on:{input:[function(i){i.target.composing||t.$set(t.listproducts[e],"profit_margin",i.target.value)},function(i){return t.onChange(e)}]}})]),t._v(" "),s("td",[t._v("\n              "+t._s(t.listproducts[e].sale_price.toLocaleString("en-US"))+"\n            ")]),t._v(" "),s("td",[t._v("\n              "+t._s(t.listproducts[e].total.toLocaleString("en-US"))+"\n            ")])])}),0)])]),t._v(" "),t.supplierid&&t.suppliername?s("addbrand",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],attrs:{supplierid:t.supplierid,suppliername:t.suppliername},on:{inputData:t.updateMessage,close:t.closeModal}}):t._e()],1),t._v(" "),s("vue-confirm-dialog")],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("section",{staticClass:"content-header"},[i("h1",[this._v("Quản lý báo giá")]),this._v(" "),i("ol",{staticClass:"breadcrumb"},[i("li",[i("a",[i("i",{staticClass:"fa fa-dashboard"}),this._v("Trang chủ")])]),this._v(" "),i("li",[i("a",[this._v("Yêu cầu báo giá cho nhà cung cấp")])])])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("thead",[s("tr",[s("th",{attrs:{width:"25px"}},[t._v("STT")]),t._v(" "),s("th",[t._v("Diễn giải")]),t._v(" "),s("th",[t._v("NCC")]),t._v(" "),s("th",[t._v("Đơn vị tính")]),t._v(" "),s("th",[t._v("Số lượng")]),t._v(" "),s("th",[t._v("Giá nhập")]),t._v(" "),s("th",[t._v("Hệ số lợi nhuận")]),t._v(" "),s("th",[t._v("Giá bán")]),t._v(" "),s("th",[t._v("Tổng tiền")])])])}]},r=s("VU/8")(a,l,!1,null,null,null);i.default=r.exports}});
//# sourceMappingURL=10.34aa6e3d1cb154e5a103.js.map