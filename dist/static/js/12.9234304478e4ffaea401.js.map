{"version":3,"sources":["webpack:///src/components/toquote/chooseprofit.vue","webpack:///./src/components/toquote/chooseprofit.vue?a9c7","webpack:///./src/components/toquote/chooseprofit.vue"],"names":["chooseprofit","data","isModalVisible","isModalEditVisible","isModalProducttypeVisible","listproducts","countinvoicetype","page","Number","this","$route","query","editid","supplierid","suppliername","projects","supplier_name","json_fields","Tên sản phẩm","Nhà cung cấp","Đơn vị tính","Số lượng","json_data","json_meta","key","value","components","addbrand","methods","todate","item","lib_default","a","timestamptodate","onChange","index","sale_price","price","profit_margin","total","num","showisModalProducttype","id","console","log","closeModal","closeEditModal","closeProductTypeModal","saveUpdateProfit","$http","post","toquotedetails","headers","Authorization","localStorage","getItem","then","response","confirm","window","location","href","catch","error","updateMessage","variable","listinvoicetypes","mounted","_this","get","toquote_id","x","detail_id","change","toquote_chooseprofit","render","_vm","_h","$createElement","_c","_self","_m","_v","staticClass","on","click","_l","invoicetype","_s","name","supplier_choise","unit","toLocaleString","directives","rawName","expression","attrs","placeholder","type","domProps","input","$event","target","composing","$set","event","inputData","close","_e","staticRenderFns","width","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/12.9234304478e4ffaea401.js","sourcesContent":["<template>\n  <div>\n    <section class=\"content-header\">\n      <h1>Quản lý báo giá</h1>\n      <ol class=\"breadcrumb\">\n        <li>\n          <a><i class=\"fa fa-dashboard\"></i>Trang chủ</a>\n        </li>\n        <li><a>Yêu cầu báo giá cho nhà cung cấp</a></li>\n      </ol>\n    </section>\n    <section class=\"panel panel-inverse\">\n      <div class=\"row\">\n        <div class=\"panel-body\">\n\n          <button\n            class=\"btn btn-primary m-r-5 m-b-5\"\n            @click=\"saveUpdateProfit\"\n          >\n            Lưu lại\n          </button>\n        \n        </div>\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th width=\"25px\">STT</th>\n              <th>Diễn giải</th>\n              <th>NCC</th>\n              <th>Đơn vị tính</th>\n              <th>Số lượng</th>\n              <th>Giá nhập</th>\n              <th>Hệ số lợi nhuận</th>\n              <th>Giá bán</th>\n              <th>Tổng tiền</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(invoicetype, index) in listproducts\" :key=\"index\">\n              <td>{{ index + 1 }}</td>\n              <td><p class=\"item_list_1\">{{listproducts[index].name}}</p></td>\n              <td><p class=\"item_list_1\">{{listproducts[index].supplier_choise}}</p></td>\n              <td><p class=\"item_list_1\">{{listproducts[index].unit}}</p></td>\n              <td><p class=\"item_list_1\">{{listproducts[index].num}}</p></td>\n              <td><p class=\"item_list_1\">{{listproducts[index].price.toLocaleString('en-US')}}</p></td>\n              <td>\n                <input\n                  class=\"form-control\"\n                  placeholder=\"Hệ số lợi nhuận\"\n                  v-model=\"listproducts[index].profit_margin\"\n                  type=\"number\"\n                  @input=\"event => onChange(index)\"\n                />\n              </td>\n              <td>\n                {{listproducts[index].sale_price.toLocaleString('en-US')}}\n              </td>\n              <td>\n                {{listproducts[index].total.toLocaleString('en-US')}}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <addbrand @inputData=\"updateMessage\"\n        v-if=\"supplierid&&suppliername\"\n        v-show=\"isModalVisible\"\n        @close=\"closeModal\"\n        :supplierid=\"supplierid\"\n        :suppliername=\"suppliername\"\n      />\n    </section>\n    <vue-confirm-dialog></vue-confirm-dialog>\n  </div>\n</template>\n<script>\nimport addbrand from \"@/components/brands/addbrand\";\nimport lib from \"@/plugins/lib.js\";\nexport default {\n  data() {\n    return {\n      isModalVisible: false,\n      isModalEditVisible: false,\n      isModalProducttypeVisible: false,\n      listproducts: \"\",\n      countinvoicetype: \"\",\n      page: Number(this.$route.query.page),\n      editid: \"\",\n      supplierid:\"\",\n      suppliername:\"\",\n      projects: \"\",\n      supplier_name: \"\",\n      json_fields: {\n        \"Tên sản phẩm\": \"name\",\n        \"Nhà cung cấp\": \"supplier\",\n        \"Đơn vị tính\": \"unit\",\n        \"Số lượng\": \"num\"\n      },\n      json_data: [],\n      json_meta: [\n        [\n          {\n            key: \"charset\",\n            value: \"utf-8\"\n          }\n        ]\n      ]\n    };\n  },\n  components: {\n    addbrand,\n  },\n  methods: {\n    todate: function(item) {\n      return lib.timestamptodate(item);\n    },\n    onChange(index) {\n      this.listproducts[index].sale_price = this.listproducts[index].price/this.listproducts[index].profit_margin\n      this.listproducts[index].total = this.listproducts[index].sale_price*this.listproducts[index].num\n    },\n    showisModalProducttype(id) {\n      console.log(id);\n      this.editid = id;\n      this.isModalProducttypeVisible = true;\n    },\n    closeModal() {\n      this.isModalVisible = false;\n    },\n    closeEditModal() {\n      this.isModalEditVisible = false;\n    },\n    closeProductTypeModal() {\n      this.isModalProducttypeVisible = false;\n    },\n    saveUpdateProfit() {\n      this.$http\n        .post(\n          \"api/toquotedetails/updateprofit\",\n          {\n            toquotedetails:this.listproducts\n          },\n          {\n            headers: { Authorization: `Basic ${localStorage.getItem(\"token\")}` }\n          }\n        )\n        .then(response => {\n            if (confirm(\"Lưu thành công, quay về trang trước!\")) {\n              window.location.href = '/toquote'\n            } else {\n              \n            }\n        })\n        .catch(function(error) {\n          console.error(error.response);\n        });\n    },\n    updateMessage(variable) {\n      this.listinvoicetypes = variable;\n    }\n  },\n  mounted() {\n    this.$http\n      .get(\"api/toquotedetails/getalltoquotedetails?id=\"+this.$route.query.toquote_id, {\n        headers: { Authorization: `Basic ${localStorage.getItem(\"token\")}` }\n      })\n      .then(response => {\n        this.listproducts = response.data\n        for (var x in response.data) {\n          this.listproducts[x].detail_id = response.data[x].toquote_id;\n          this.listproducts[x].change = 1;\n        }\n        console.log(this.listproducts)\n    });\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/toquote/chooseprofit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('section',{staticClass:\"panel panel-inverse\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"panel-body\"},[_c('button',{staticClass:\"btn btn-primary m-r-5 m-b-5\",on:{\"click\":_vm.saveUpdateProfit}},[_vm._v(\"\\n          Lưu lại\\n        \")])]),_vm._v(\" \"),_c('table',{staticClass:\"table\"},[_vm._m(1),_vm._v(\" \"),_c('tbody',_vm._l((_vm.listproducts),function(invoicetype,index){return _c('tr',{key:index},[_c('td',[_vm._v(_vm._s(index + 1))]),_vm._v(\" \"),_c('td',[_c('p',{staticClass:\"item_list_1\"},[_vm._v(_vm._s(_vm.listproducts[index].name))])]),_vm._v(\" \"),_c('td',[_c('p',{staticClass:\"item_list_1\"},[_vm._v(_vm._s(_vm.listproducts[index].supplier_choise))])]),_vm._v(\" \"),_c('td',[_c('p',{staticClass:\"item_list_1\"},[_vm._v(_vm._s(_vm.listproducts[index].unit))])]),_vm._v(\" \"),_c('td',[_c('p',{staticClass:\"item_list_1\"},[_vm._v(_vm._s(_vm.listproducts[index].num))])]),_vm._v(\" \"),_c('td',[_c('p',{staticClass:\"item_list_1\"},[_vm._v(_vm._s(_vm.listproducts[index].price.toLocaleString('en-US')))])]),_vm._v(\" \"),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.listproducts[index].profit_margin),expression:\"listproducts[index].profit_margin\"}],staticClass:\"form-control\",attrs:{\"placeholder\":\"Hệ số lợi nhuận\",\"type\":\"number\"},domProps:{\"value\":(_vm.listproducts[index].profit_margin)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.listproducts[index], \"profit_margin\", $event.target.value)},function (event) { return _vm.onChange(index); }]}})]),_vm._v(\" \"),_c('td',[_vm._v(\"\\n              \"+_vm._s(_vm.listproducts[index].sale_price.toLocaleString('en-US'))+\"\\n            \")]),_vm._v(\" \"),_c('td',[_vm._v(\"\\n              \"+_vm._s(_vm.listproducts[index].total.toLocaleString('en-US'))+\"\\n            \")])])}),0)])]),_vm._v(\" \"),(_vm.supplierid&&_vm.suppliername)?_c('addbrand',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isModalVisible),expression:\"isModalVisible\"}],attrs:{\"supplierid\":_vm.supplierid,\"suppliername\":_vm.suppliername},on:{\"inputData\":_vm.updateMessage,\"close\":_vm.closeModal}}):_vm._e()],1),_vm._v(\" \"),_c('vue-confirm-dialog')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"content-header\"},[_c('h1',[_vm._v(\"Quản lý báo giá\")]),_vm._v(\" \"),_c('ol',{staticClass:\"breadcrumb\"},[_c('li',[_c('a',[_c('i',{staticClass:\"fa fa-dashboard\"}),_vm._v(\"Trang chủ\")])]),_vm._v(\" \"),_c('li',[_c('a',[_vm._v(\"Yêu cầu báo giá cho nhà cung cấp\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"25px\"}},[_vm._v(\"STT\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Diễn giải\")]),_vm._v(\" \"),_c('th',[_vm._v(\"NCC\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Đơn vị tính\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Số lượng\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Giá nhập\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Hệ số lợi nhuận\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Giá bán\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Tổng tiền\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6bc193b7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toquote/chooseprofit.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chooseprofit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chooseprofit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6bc193b7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chooseprofit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toquote/chooseprofit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}